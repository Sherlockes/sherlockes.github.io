<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Synology on Sherblog</title>
    <link>/tags/synology/</link>
    <description>Contenido reciente in Synology en Sherblog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>es</language>
    <lastBuildDate>Thu, 09 Aug 2018 00:00:00 +0000</lastBuildDate>
    
        <atom:link href="/tags/synology/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Copiar ssh key desde Synology</title>
      <link>/copiar-ssh-key-desde-synology/</link>
      <pubDate>Thu, 09 Aug 2018 00:00:00 +0000</pubDate>
      
      <guid>/copiar-ssh-key-desde-synology/</guid>
      <description>

&lt;h3 id=&#34;el-problema&#34;&gt;El problema&lt;/h3&gt;

&lt;p&gt;Generar la llave ssh (ssh-key) de un usuario dentro de un nas Synology es tan sencillo como acceder al mismo a través de ssh (Es necesario tener activado el servicio desde el panel de control de DSM y la opción &amp;ldquo;Terminal y snmp&amp;rdquo;) y posteriormente ejecutar el comando.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ssh-keygen
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Esta llave se guardará dentro de la carpeta del usuario en el directorio &amp;ldquo;.ssh&amp;rdquo; de modo en entre otros archivos se genera un &amp;ldquo;id_rsa.pub&amp;rdquo; que es el que deberemos copiar al equipo que queremos acceder.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Para el caso del usuario root dentro de Synology es tan sencillo como después de haber accedido via terminal con la cuenta de un administrador introducir el comando &lt;code&gt;sudo -i&lt;/code&gt; con la misma contraseña del administrador.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;La copia de las llaves ssh de un equipo a otro es un procedimiento que , aunque en un perfecto ingles, está documentado en la web oficial de &lt;a href=&#34;https://www.ssh.com/ssh/copy-id&#34;&gt;ssh&lt;/a&gt; pero en el momento que intentamos llevarlo a cabo nos encontramos con que el comando &amp;ldquo;ssh-copy-id&amp;rdquo; no está accesible en la terminal de Synology (Al menos en DSM 6.2)&lt;/p&gt;

&lt;p&gt;De momento no cunde el pánico pues parece sencillo instalar esta utilidad mediante el comando &lt;code&gt;sudo apt-get install ssh-copy-id&lt;/code&gt; pero la cosa se complica cuando me doy cuenta de que en Synology no es posible instalar paquetes mediante apt-get o aptitude.&lt;/p&gt;

&lt;h3 id=&#34;la-solución&#34;&gt;La solución&lt;/h3&gt;

&lt;p&gt;Tras una breve navegación por la web he encontrado una solución usando el comando &amp;ldquo;cat&amp;rdquo; utilizado para concatenar archivos y mostrarlos como salida según se muestra en el siguiente código.  Tan solo hay que introducir el nombre de usuario e ip del equipo al que queremos copiar las llaves.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;cat ~/.ssh/id_rsa.pub | ssh &amp;lt;usuario&amp;gt;@&amp;lt;ip_equipo&amp;gt; &#39;cat &amp;gt;&amp;gt; .ssh/authorized_keys &amp;amp;&amp;amp; echo &amp;quot;Llave copiada&amp;quot;&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Y ya está, ahora nuestro nas Synology deberá poder acceder al equipo remoto via ssh sin tener que introducir la contraseña.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Error al exportar base de datos de WordPress en Synology webStation</title>
      <link>/error-al-exportar-base-de-datos-de-wordpress-en-synology-webstation/</link>
      <pubDate>Fri, 05 May 2017 00:00:00 +0000</pubDate>
      
      <guid>/error-al-exportar-base-de-datos-de-wordpress-en-synology-webstation/</guid>
      <description>&lt;p&gt;Hace unos días que publiqué el &lt;a href=&#34;/copia-de-seguridad-de-la-base-de-datos-de-wordpress/&#34;&gt;modo&lt;/a&gt; en el que hacía la copia de seguridad de la base de datos de WordPress desde el propio hosting hasta una unidad de Google Drive. Haciendo pruebas para alojar la web en el Nas de Synology me doy cuenta de que el &lt;a href=&#34;https://es.wordpress.org/plugins/wp-db-backup&#34;&gt;plugin&lt;/a&gt; para exportar la base de datos y enviarla por correo electrónico periódicamente no funciona.&lt;/p&gt;

&lt;p&gt;Pruebo con otros plugins similares y todos me dan el mismo error y tras unas pruebas y un poco de buceo por la red me doy cuenta que el problema reside en la incapacidad del servidor web para tratar los archivos comprimidos.&lt;/p&gt;

&lt;p&gt;La solución es simple, sólo hace falta habilitar la extensión &amp;ldquo;zip&amp;rdquo; de la configuración de php del Synology WebStation tal y como se puede ver en la siguiente imagen.&lt;/p&gt;

&lt;p&gt;![error_db][1]&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Descarga fallida. No working transports found</title>
      <link>/descarga-fallida.-no-working-transports-found/</link>
      <pubDate>Mon, 13 Mar 2017 00:00:00 +0000</pubDate>
      
      <guid>/descarga-fallida.-no-working-transports-found/</guid>
      <description>&lt;p&gt;Después de la instalación de WordPress en el servidor Synology al intentar actualizar los temas o los plugins me encuentro con el siguiente error.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;/images/20170215_descarga_fallida_01.jpg&#34; alt=&#34;imagen&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Pues nada, toca &amp;ldquo;Googlear&amp;rdquo; un rato y pronto me doy cuenta de que la solución es bastante sencilla y basta con habilitar la extensión &amp;ldquo;Curl&amp;rdquo; dentro de la configuración de php de la aplicación Web Station tal y como se puede ver en la siguiente captura de pantalla.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;/images/20170215_descarga_fallida_02.jpg&#34; alt=&#34;imagen&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Aplicamos los cambios, probamos de nuevo a actualizar el tema, sin reinicio de la aplicación, del servidor ni nada y&amp;hellip; ya funciona¡¡¡&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;/images/20170215_descarga_fallida_03.jpg&#34; alt=&#34;imagen&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Que todos los problemas sean como este.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Instalación manual de WordPress en Synology</title>
      <link>/instalaci%C3%B3n-manual-de-wordpress-en-synology/</link>
      <pubDate>Tue, 28 Feb 2017 00:00:00 +0000</pubDate>
      
      <guid>/instalaci%C3%B3n-manual-de-wordpress-en-synology/</guid>
      <description>&lt;p&gt;Desde el centro de paquetes de DSM en posible acceder a la instalación de WordPress de una forma sencilla tal y como puedes es en este &lt;a href=&#34;https://www.jmramirez.pro/tutorial/web-en-un-synology-con-wordpress/&#34;&gt;tutorial&lt;/a&gt;, pero si lo que tu quieres es realizar una instalación manual con la que consigas un mayor control aquí te dejo los pasos a seguir.&lt;/p&gt;

&lt;p&gt;Antes de comenzar con la instalación de WordPress hay que instalar &amp;ldquo;Web Station&amp;rdquo; como servidor de archivos, &amp;ldquo;Maria Db&amp;rdquo; para el alojamiento de las bases de datos y &amp;ldquo;PhpMyAdmin&amp;rdquo; para gestionar las bases de datos. Tras instalar &amp;ldquo;Web Station&amp;rdquo; seleccionaremos Apache como servidor y la versión de php. Para &amp;ldquo;Maria Db&amp;rdquo; es muy importante generar una contraseña para el usuario root después de instalarlo. Con esto ya podemos iniciar la instalación propia de WordPress.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;¡¡¡Es importante hacer los pasos según indico a continuación y olvídate de acceder o editar el contenido del NAS desde el explorador del pc en lugar de hacerlo desde el entorno de DSM para no tener problemas con los permisos.¡¡¡&lt;/em&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Accedemos a la &lt;a href=&#34;https://es.wordpress.org/&#34;&gt;web en castellano de WordPress&lt;/a&gt; y copiamos la dirección del enlace de la descarga de la última versión.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&#34;/images/20170228_wordpress_manual_01.jpg&#34; alt=&#34;imagen&#34; /&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Abrimos Download Station desde DSM y añadimos una nueva descarga con la dirección que hemos copiado.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&#34;/images/20170228_wordpress_manual_02.jpg&#34; alt=&#34;imagen&#34; /&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Extraemos el contenido del archivo descargado en la la carpeta compartida &amp;ldquo;web&amp;rdquo; que se ha creado en el raiz.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&#34;/images/20170228_wordpress_manual_03.jpg&#34; alt=&#34;imagen&#34; /&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Renombramos la carpeta, en este caso le he puesto el nombre &amp;ldquo;tuto&amp;rdquo;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&#34;/images/20170228_wordpress_manual_04.jpg&#34; alt=&#34;imagen&#34; /&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Ya podemos acceder a la instalación web de WordPress para lo cual en el navegador introduciremos la ip del Nas seguido de la carpeta de wordpress. En este caso introduciré &lt;a href=&#34;http://192.168.1.200/tuto&#34;&gt;http://192.168.1.200/tuto&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&#34;/images/20170228_wordpress_manual_05.jpg&#34; alt=&#34;imagen&#34; /&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Abrimos PhpMyAdmin desde otra pestaña del navegador (&lt;a href=&#34;http://192.168.1.200/phpMyAdmin/&#34;&gt;http://192.168.1.200/phpMyAdmin/&lt;/a&gt; ojo con las mayúsculas) y accedemos con el usuario root y la contraseña que hemos cambiado en Maria Db con anterioridad. Accedemos al menú &amp;ldquo;Cuentas de Usuarios&amp;rdquo; y clickamos en &amp;ldquo;Agregar cuenta de usuario&amp;rdquo;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&#34;/images/20170228_wordpress_manual_06.jpg&#34; alt=&#34;imagen&#34; /&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Introducimos en nombre para el usuario y la contraseña (en nuestro caso he utilizado &amp;ldquo;tuto&amp;rdquo; como usuario y &amp;ldquo;tuto123&amp;rdquo; como pass, pero no tiene por que coincidir con el nombre de la carpeta donde hemos descomprimido la instalación de WordPress, aunque simplifica bastante) y rellenamos el cuadro &amp;ldquo;Crear base de datos con el mismo nombre y otorgar todos los privilegios&amp;rdquo;. Pinchamos en el botón &amp;ldquo;Continuar&amp;rdquo; y si todo ha ido bien nos aparecerá en la parte superior un cuadro como este.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&#34;/images/20170228_wordpress_manual_07.jpg&#34; alt=&#34;imagen&#34; /&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Ya podemos cerrar la pestaña del navegador de phpMyAdmin y volver a &lt;a href=&#34;http://192.168.1.200/tuto&#34;&gt;http://192.168.1.200/tuto&lt;/a&gt; para pinchar en el botón &amp;ldquo;¡Vamos a ello¡&amp;rdquo;. Modificaremos los campos de &amp;ldquo;Nombre de base de datos&amp;rdquo;, &amp;ldquo;Nombre de usuario&amp;rdquo; y &amp;ldquo;contraseña&amp;rdquo; con los que hemos creado en el paso anterior en phpMyAdmin.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&#34;/images/20170228_wordpress_manual_08.jpg&#34; alt=&#34;imagen&#34; /&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Si todo ha ido bien, al enviar el formulario nos aparecerá lo siguiente.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&#34;/images/20170228_wordpress_manual_09.jpg&#34; alt=&#34;imagen&#34; /&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;El sistema no ha podido modificar el archivo &amp;ldquo;wp-config.php&amp;rdquo;. Para seguir adelante necesitamos tener instalado el paquete &amp;ldquo;Editor de texto&amp;rdquo; en DSM. Desde &amp;ldquo;File Station&amp;rdquo; en la carpeta &amp;ldquo;web/tuto&amp;rdquo; renombraremos el archivo &amp;ldquo;wp-config-sample.php&amp;rdquo; a &amp;ldquo;wp-config.php&amp;rdquo;, lo editaremos (Botón derecho y &amp;ldquo;Abrir con editor de texto&amp;rdquo;) de forma que borraremos todo el texto y lo sustituiremos por lo que nos ha sugerido el instalador en el paso anterior.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&#34;/images/20170228_wordpress_manual_10.jpg&#34; alt=&#34;imagen&#34; /&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Con el archivo editado ya podemos &amp;ldquo;Ejecutar la instalación&amp;rdquo; para en la siguiente pantalla introducir en título del sitio y crear un usuario de administración con su correspondiente contraseña. Añadimos nuestra dirección de correo electrónico y rellenamos el cuadro para que Google de momento no indexe nuestro sitio (Ya lo hará después cuando lo tengamos más arregladito)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&#34;/images/20170228_wordpress_manual_11.jpg&#34; alt=&#34;imagen&#34; /&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Pinchamos en &amp;ldquo;Instalar WordPress&amp;rdquo;, esperamos unos segundos y&amp;hellip;. Voila¡¡¡&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&#34;/images/20170228_wordpress_manual_12.jpg&#34; alt=&#34;imagen&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Ya podemos acceder a nuestro sitio con el usuario y contraseña que hemos creado en el paso anterior. De aquí en adelante&amp;hellip; horas y horas para añadir contenido y darle formato.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Backup de la web al Nas mediante ftp y ssh en Synology</title>
      <link>/backup-de-la-web-al-nas-mediante-ftp-y-ssh-en-synology/</link>
      <pubDate>Sun, 26 Feb 2017 00:00:00 +0000</pubDate>
      
      <guid>/backup-de-la-web-al-nas-mediante-ftp-y-ssh-en-synology/</guid>
      <description>&lt;p&gt;Esta vez y como casi siempre el objetivo es sencillo, crear una copia de seguridad del contenido de una página web al &lt;a href=&#34;https://es.wikipedia.org/wiki/Almacenamiento_conectado_en_red&#34;&gt;Nas&lt;/a&gt; que tengo en casa, de una forma automática y periódica.&lt;/p&gt;

&lt;p&gt;Después de valorar varias alternativas, la que me ha parecido más apropiada es mediante una conexión &lt;a href=&#34;https://es.wikipedia.org/wiki/File_Transfer_Protocol&#34;&gt;ftp&lt;/a&gt;. Puesto que esta web trabaja bajo WordPress resultará suficiente la copia de la carpeta &amp;ldquo;wp-content&amp;rdquo; desde el servidor del hosting a nuestro Nas. Otro día veremos como gestionar la copia de seguridad de la base de datos de WordPress.&lt;/p&gt;

&lt;p&gt;En primer lugar crearemos un archivo de texto del tipo &amp;ldquo;backup.sh&amp;rdquo; en un directorio del nas al que nuestro usuario tenga acceso e introduciremos el siguiente código&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;wget -m ftp://usuario:pass@tusitio.es/public_html/blog/wp-content -P /ruta
tar -zcvf /ruta/$(date +%Y-%m-%d)_bkp_tusitio.tar.gz /ruta/tusitio.es
rm -r /ruta/tusitio.es
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;La primera línea copia mediante una conexión ftp la carpeta &amp;ldquo;wp-content&amp;rdquo; desde tusitio.es a la ruta que le especifiques de tu nas. La segunda comprime la carpeta anterior a un archivo &amp;ldquo;fecha_bkp_tusitio.tar.gz&amp;rdquo; y la tercera elimina la carpeta descargada para solo quedarnos con el archivo comprimido.&lt;/p&gt;

&lt;p&gt;Con lo anterior ahora sólo resta crear desde el panel de control de DSM una tarea programada para que el archivo de líneas de comando se ejecute con la periodicidad que deseemos.&lt;/p&gt;


&lt;div style=&#34;position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;&#34;&gt;
  &lt;iframe src=&#34;//www.youtube.com/embed/IcIhnV0Xif8&#34; style=&#34;position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;&#34; allowfullscreen title=&#34;YouTube Video&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt;


&lt;p&gt;Una forma rápida, sencilla y completamente transparente para el usuario de forma que sólo nos tenemos que preocupar de ir borrando las copias de seguridad antiguas para que no ocupen mucho espacio en el NAS.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Se cierra el círculo, vuelve el servidor casero.</title>
      <link>/se-cierra-el-c%C3%ADrculo-vuelve-el-servidor-casero./</link>
      <pubDate>Wed, 22 Feb 2017 00:00:00 +0000</pubDate>
      
      <guid>/se-cierra-el-c%C3%ADrculo-vuelve-el-servidor-casero./</guid>
      <description>&lt;p&gt;Han pasado diez años desde que intenté por primera vez montar un &lt;a href=&#34;/al-fin-se-ve-la-luz/&#34;&gt;servidor web casero&lt;/a&gt;, entonces lo hice sobre un viejo Pentium II a 233mhz que ya no utilizaba y en el que puse a correr Debian y LAMP no sin invertir muchas horas de trabajo. En un par de meses conseguí que funcionara todo y esta página estuvo alojada en el durante un tiempo. Pero aquel pc reconvertido en servidor aunque cumplía sin problemas su cometido no estaba preparado para hacerlo 24 horas al día y 365 días al año. Sinceramente no me acuerdo exactamente si fue por la factura de la luz, por el ruido que producía en mi habitación o simplemente por culpa de una avería, pero pasado un tiempo lo apagué y pasé a alojar la web en un hosting gratuito. La aventura no era sostenible pero mereció la pena todo el esfuerzo por lo aprendido en el camino. Como resumen de todo esto podéis var una vuelta por la categoría &lt;a href=&#34;/categories/sherver/&#34;&gt;Sherver&lt;/a&gt; de los artículos de la web y ver los más antiguos.&lt;/p&gt;

&lt;p&gt;Ahora, pasado todo este tiempo vuelvo a intentarlo y todo gracias a &lt;a href=&#34;https://www.jmramirez.pro&#34;&gt;José Manuel Ramirez&lt;/a&gt; y su podcast &lt;a href=&#34;https://www.jmramirez.pro/culturanas/&#34;&gt;Cultura NAS&lt;/a&gt; que si no has escuchado nunca te invito a que lo hagas. Esta vez la aventura va a ser más fácil aunque más cara ya que se centra en un &lt;a href=&#34;https://www.synology.com/es-es/products/DS216+II&#34;&gt;Synology 216+II&lt;/a&gt; que he comprado en &lt;a href=&#34;http://qloudea.com/&#34;&gt;Qloudea&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;/images/20160222_ds216II_01.jpg&#34; alt=&#34;Nas&#34; /&gt;&lt;/p&gt;

&lt;p&gt;El gasto ha sido grande, pero las posibilidades son muchas y poco a poco intentaré configurarlo y dejar aquí mis aventuras con el mismo para la posteridad.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>